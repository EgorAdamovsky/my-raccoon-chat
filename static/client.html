<html lang="en">
<head>
    <title>Клиент</title>
</head>
<body>
<script src="/socket.io/socket.io.js"></script>
<link rel="stylesheet" href="style.css">

<div class="main-chat">
    <div class="main-chat-inside">
        <div class="chat" id="chat"></div>
    </div>
    <div class="my-input">
        <input class="input-chat" id="field" type="text" placeholder="Введите сообщение..." />
        <button class="send" onclick="Click()">>></button>
    </div>
</div>

<script>
    let socket = io();
    const chat = document.getElementById("chat");
    const inp = document.getElementById("field");
    const params = new URLSearchParams(window.location.search);
    const nick = params.get('nick');

    socket.on("start-chat", function (msg) {
        console.log(msg);
    });

    socket.on("input-chat-other", function (msg) {
        const d = document.createElement("div");
        d.className = "to_r";
        d.innerHTML = msg;
        chat.append(d);
    });

    socket.on("input-chat-me", function (msg) {
        const d = document.createElement("div");
        d.className= "to_l";
        d.innerHTML = msg;
        chat.append(d);
    });

    function Click() {
        socket.emit("chat", "<b>" + nick + "</b><br>" + inp.value);
        inp.value = "";
    }

</script>

</body>
</html>
