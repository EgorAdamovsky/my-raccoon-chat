<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Регистрация</title>
    <link rel="icon" href="raccoon.ico">
    <link rel="stylesheet" href="style.css">
</head>
<body class="back">

<form class="main-reg" action="/reg" method="get">
    <div>Введите ник:</div>
    <input class="login-reg" name="nick" id="nick" type="text">
    <input class="login-reg" name="pass" id="pass" type="text">
    <input type="button" value="Войти" onclick="Reg()">
</form>

<script>
    function Reg() {
        let req = new XMLHttpRequest();
        req.open('POST', '/reg', false);
        req.setRequestHeader('Content-type', 'application/json; charset=utf8');
        const obj = {
            nick: document.getElementById("nick").value,
            pass: document.getElementById("pass").value
        };
        req.onreadystatechange = function () {
            console.log(req.responseText);
            if (req.responseText !== "") {
                window.location.href = "client.html?nick=" + req.responseText.replaceAll("\"", "").replaceAll(" ", "-");
            }
            else {
                alert("Упс... Что-то пошло не так!");
            }
        }
        req.send(JSON.stringify(obj));
    }
</script>

</body>
</html>